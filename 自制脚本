local CoreGui = game:GetService("StarterGui") -- Variable of StarterGui

CoreGui:SetCore("SendNotification", {
    -- Customizable
    Title = "给我去新主群",
    Text = "群号：571374100",
    Duration = 2, --时间
})

local CoreGui = game:GetService("StarterGui") -- Variable of StarterGui

local Whitelisted = false;

if game.Players.LocalPlayer.Name == "TMD2540z" then 
Whitelisted = true 
end

if game.Players.LocalPlayer.Name == "" then 
Whitelisted = true 
end

if game.Players.LocalPlayer.Name == "可以重复" then 
Whitelisted = true 
end

if game.Players.LocalPlayer.Name == "可以重复" then 
Whitelisted = true 
end

if game.Players.LocalPlayer.Name == "可以重复" then 
Whitelisted = true 
end

if game.Players.LocalPlayer.Name == "可以重复" then 
Whitelisted = true 
end

if Whitelisted == true then

CoreGui:SetCore("SendNotification", {
    -- Customizable
    Title = "白名单认证",
    Text = "玩家:"..game.Players.LocalPlayer.Name.."，执行寻找印钞机",
    Duration = 7, --时间
}) 

local function findAndTeleportToMoneyPrinter()
    local workspace = game:GetService('Workspace')
    local entitiesFolder = workspace.Game.Entities.ItemPickup
    local humanoidRootPart = game.Players.LocalPlayer.Character.HumanoidRootPart
    local foundMoneyPrinter = false

    for _, item in pairs(entitiesFolder:GetChildren()) do
        for _, part in pairs(item:GetChildren()) do
            if part.ClassName == 'MeshPart' or part.ClassName == 'Part' then
                for _, proximityPrompt in pairs(part:GetChildren()) do
                    if proximityPrompt.ClassName == 'ProximityPrompt' and proximityPrompt.ObjectText == 'Money Printer' then
                        humanoidRootPart.CFrame = part.CFrame
                        foundMoneyPrinter = true
                        break
                    end
                end
            end
        end
    end

    -- 移除所有BillboardGui
    for _, item in pairs(entitiesFolder:GetChildren()) do
        for _, child in pairs(item:GetChildren()) do
            if child.ClassName == 'BillboardGui' then
                child:Remove()
            end
        end
    end

    return foundMoneyPrinter
end

-- 执行服务器切换
local function switchServer()
    game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
end

-- 主逻辑
if not findAndTeleportToMoneyPrinter() then
    switchServer()
end

   else
       game.Players.LocalPlayer:Kick("您没有白名单")--踢人函数
   end
   
   
   
   
   
   
   
   
   
-- 查找并瞬移到印钞机
local function findAndTeleportToMoneyPrinter()
    local workspace = game:GetService('Workspace')
    local entitiesFolder = workspace.Game.Entities.ItemPickup
    local humanoidRootPart = game.Players.LocalPlayer.Character.HumanoidRootPart
    
    for _, item in pairs(entitiesFolder:GetChildren()) do
        for _, part in pairs(item:GetChildren()) do
            if part.ClassName == 'MeshPart' or part.ClassName == 'Part' then
                for _, proximityPrompt in pairs(part:GetChildren()) do
                    if proximityPrompt.ClassName == 'ProximityPrompt' and proximityPrompt.ObjectText == 'Money Printer' then
                        humanoidRootPart.CFrame = part.CFrame
                        break
                    end
                end
            end
        end
    end
    
    -- 移除所有BillboardGui
    for _, item in pairs(entitiesFolder:GetChildren()) do
        for _, child in pairs(item:GetChildren()) do
            if child.ClassName == 'BillboardGui' then
                child:Remove()
            end
        end
    end
end

-- 执行服务器切换
local function switchServer()
    game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
end

-- 主逻辑
findAndTeleportToMoneyPrinter() -- 立即执行查找并瞬移到印钞机
wait(5) -- 等待5秒
switchServer() -- 切换服务器
