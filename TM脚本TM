local OrionLib = {}

-- 创建主 UI 容器
OrionLib.MainUI = Instance.new("ScreenGui")
OrionLib.MainUI.Name = "OrionLibMainUI"
OrionLib.MainUI.ZIndex = 999 -- 设置较高的层级以确保在其他 GUI 上方
OrionLib.MainUI.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- 创建背景颜色
local function setBackgroundColor(frame, color)
    frame.BackgroundColor3 = color
end

-- 创建框架
function OrionLib.CreateFrame(parent, size, position, anchorPoint, background)
    local frame = Instance.new("Frame")
    frame.Size = size
    frame.Position = position
    frame.AnchorPoint = anchorPoint or Vector2.new(0.5, 0.5)
    frame.Parent = parent
    if background then
        setBackgroundColor(frame, background)
    end
    return frame
end

-- 创建文本标签
function OrionLib.CreateTextLabel(parent, text, size, position, anchorPoint)
    local label = Instance.new("TextLabel")
    label.Text = text
    label.Size = size
    label.Position = position
    label.AnchorPoint = anchorPoint or Vector2.new(0.5, 0.5)
    label.FontSize = Enum.FontSize.Size18
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Parent = parent
    return label
end

-- 创建按钮
function OrionLib.CreateButton(parent, text, size, position, callback)
    local button = OrionLib.CreateFrame(parent, size, position)
    button.BackgroundTransparency = 0.5
    local buttonText = OrionLib.CreateTextLabel(button, text, UDim2.new(1, 0, 1, 0), UDim2.new(0.5, 0, 0.5, 0))
    
    button.MouseButton1Click:Connect(callback)
    return button
end

-- 创建一个可以关闭或显示的浮动窗口
function OrionLib.CreateFloatingWindow(parent, size, position, anchorPoint, background)
    local floatingWindow = OrionLib.CreateFrame(parent, size, position, anchorPoint, background)
    
    -- 添加一个按钮来控制窗口的显示/隐藏
    local toggleButton = OrionLib.CreateButton(floatingWindow, "Toggle", UDim2.new(0.3, 0, 0.1, 0), UDim2.new(0.5, -15, 0.5, -15), function()
        if floatingWindow.Visible then
            floatingWindow.Visible = false
        else
            floatingWindow.Visible = true
        end
    end)
    
    return floatingWindow
end

-- 创建主窗口
local mainFrame = OrionLib.CreateFrame(OrionLib.MainUI, UDim2.new(0.6, 0, 0.8, 0), UDim2.new(0.5, -180, 0.5, -160), nil, Color3.fromRGB(100, 100, 120))

-- 创建一个标签页
local tabPage = OrionLib.CreateFrame(mainFrame, UDim2.new(1, -10, 1, -10), UDim2.new(0.5, 5, 0.5, 5), nil, Color3.fromRGB(100, 100, 120))

-- 创建一个文本标签
local titleLabel = OrionLib.CreateTextLabel(tabPage, "OrionLib Demo", UDim2.new(0.8, 0, 0.1, 0), UDim2.new(0.5, -40, 0.5, -40))

-- 创建一个按钮
local button = OrionLib.CreateButton(tabPage, "Click Me!", UDim2.new(0.4, 0, 0.1, 0), UDim2.new(0.5, -20, 0.5, 20), function()
    print("Button clicked!")
end)

-- 创建一个可以隐藏和显示的浮动窗口
local floatingWindow = OrionLib.CreateFloatingWindow(mainFrame, UDim2.new(0.4, 0, 0.4, 0), UDim2.new(0.5, -80, 0.5, -80), nil, Color3.fromRGB(100, 100, 120))
floatingWindow.Visible = false

-- 显示主窗口
mainFrame.Visible = true